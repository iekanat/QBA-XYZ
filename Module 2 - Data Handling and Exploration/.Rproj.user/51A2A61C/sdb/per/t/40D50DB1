{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Descriptive Statistics\"\nauthor: \"Irfan Kanat\"\ndate: \"July 3, 2017\"\noutput:\n  html_document: default\n  pdf_document: default\ngeometry: margin=1in\nurlcolor: blue\n---\n\nFirst order of business in any analytics task is to understand what we have in our hands. We are familiar with some of these methods and others we will learn as we go. \n\n## Visual Inspection\n\nLet us think of an example. Let's say you have 30 bags full of oranges, while there is some difference in weights they are more or less the same. \n\nDon't worry about the code below, I will create a series of weights for our hypothetical bags. Right now the things I do may be hard to follow, but they are not essential anyway.\n\n```{r}\nset.seed(2017) # Setting the seed for random number generator so that examples stay consistent.\nbagsOfOranges<-data.frame(bagNo=1:30, weight=rnorm(30, mean = 1.9, sd=.1)) # Create a data frame\n```\n\nLet us say the weights of each bag is stored in bagsOfOranges data.frame. Let us take a look at the data. View command presents a spread sheet like view of the data.\n\n```{r}\nView(bagsOfOranges) # Or you can double click on the name of the data.frame in environment pane in Panel C.\n```\n\nYou can also achieve the same in the commandline by simply typing the name of the dataset.\n\n```{r}\nbagsOfOranges\n```\n\nIf you want to simply see top observations you can use head() function.\n\n```{r}\nhead(bagsOfOranges, n = 4) # n parameter specifies how many lines to display, it is optional meaning you can leave it out.\n```\n\nSimilarly with the bottom observations\n\n```{r}\ntail(bagsOfOranges) # here I leave n parameter out, the default is 6 rows.\n```\n\nIf you recall Introduction to Statistical Computing Environments module's, Introduction learning activity, we discussed indexes as a way to access data in a data.frame.\n\nLet us say we want to see only the weight column, there are a few ways to do that.\n\n```{r}\n# Method 1\nbagsOfOranges[,2] # second column, notice the position of comma.\n# Method 2\nbagsOfOranges[,\"weight\"] # with column name\n# Method 3\nbagsOfOranges$weight # with $ operator and column name\n```\n\nRemember we can also index rows. Below are a few ways of doing the same\n\n```{r}\nbagsOfOranges[2,] # Second observation, notice the position of comma\n```\n\nYou can request a range of observations. Let us say you are interested in observations 4 through 8.\n\n```{r}\n# Method 1\n# Observe what : operator creates\n4:8\n# If I use the : operator to index a data.frame, we get what we want.\nbagsOfOranges[4:8,] # Observations 4 through 8\n\n# Method 2\n# Another way it to specify columns explicitly. We can use c() function to combine values\n# Observe what c function creates\nc(4, 5, 6, 7, 8)\n# If I use the c operator, I can request specific rows\nbagsOfOranges[c(4, 5, 6, 7, 8),] # Observations 4 through 8\n\n# Method 3\n# Of course you can combine the two approaches\nbagsOfOranges[c(4:6, 7, 8),]\n```\n\nCombine function is more useful if you want to get specific observations only. Let us say 3^rd^ and 7^th^.\n\n```{r}\nbagsOfOranges[c(3,7),]\n```\n\nThink about what we just learned. This way you can see how your data looks and see specific parts of it.\n\nLet me tell you about a few useful functions, that are helpful in knowing more about your data.\n\nNumber of observations, use nrow() function for data.frame and length() function for vectors (each row is a vector).\n\n```{r}\nnrow(bagsOfOranges) # bagsOfOranges is a data.frame\nlength(bagsOfOranges$bagNo) # bagNo is a vector\n```\n\nLet's revisit filtering data frame with a logic operator (learning activity 3 module 1).\n\nRemember we can use logic operators to evaluate a statement. Let us see which bags have more than 2 pounds of oranges.\n\n```{r}\n# Observe the output of logic operator, we are trying to see which bags have more than 2 pounds\nbagsOfOranges$weight>2 # Is weight greater than 2?\n# The output is a series of True False\n# If we feed this output into out dataframe index, it will only spit out the rows where evaluation is TRUE.\nbagsOfOranges[bagsOfOranges$weight>2,]\n```\n\nNow a simple exercise for you. Can you make R spit out how many bags have more than 2 pounds of oranges? What is the percentage of overweight bags? (See the end of document for solution)\n\n## Average - Mean\n\nIf anyone asks you how much a bag of oranges weights, what would you say?\n\nYou will give a figure based on your experience with the bags. This figure will most probably be the mean, or the average weight of bags. You can think the average as the simplest model one can fit the data. If you know next to nothing about other variables, the best you can do in a pinch is to report mean.\n\nIn R you can get the average with the mean() function.\n\n```{r}\nmean(bagsOfOranges$weight)\n```\n\n## Standard Deviation\n\nI will now create a second batch of bags full of apples. Let us say the apples are not as uniform as oranges and they differ greatly in terms of weights. Don't worry much about this piece of code.\n\n```{r}\nbagsOfApples<-data.frame(bagNo=1:30, weight=rnorm(30, mean = 2.1, sd=.5)) # Create a data frame\n```\n\nNow let us compare apples to oranges in terms of average weight.\n\n```{r}\nmean(bagsOfApples$weight)\nmean(bagsOfOranges$weight)\n```\n\nThe two figures are pretty close to each other. Can we say the a bag of apple will weigh more or less the same as a bag of oranges?\n\nNot really. Mean is a simple model and is useful if the difference (variance) in bags is also similar between the groups. If there is great difference between weight of bags between two groups, mean is not very useful (as one bag can be .7 pounds and the next may be 3.4 pounds).\n\nLet us learn how to figure out the difference. A common measure of difference is standard deviation (sd).\n\nLet us compare apples to oranges in terms of standard deviation with sd() function.\n\n```{r}\nsd(bagsOfApples$weight)\nsd(bagsOfOranges$weight)\n```\nYou can see the difference between weights of Orange bags is much smaller than the difference between the weights of Apples.\n\nLet me take a segway and show you what this difference means visually. For now do not worry too much about the code, you will learn how to visualize data in the following learning activity.\n\n```{r}\nlibrary(ggplot2) # Load the necessary library for fancy plots\nlibrary(gridExtra) # The library to put two panels with plots together\n\n# Create the plot for Apples\np1 <- ggplot(data=bagsOfApples, aes(weight)) + # initialize a plot for data\n  xlim(0,4) + # Set the limits of x axis to keep plots comparable\n  ylim(0,13) + # Set the limits of y axis to keep plots comparable\n  ggtitle(\"Apples\") + # Set the title to be able to identify plots\n  geom_histogram(binwidth = .1) + # Set the type of plot as a histogram\n  # Add the mean into the plot as a blue dashed line\n  geom_vline(data=bagsOfApples, aes(xintercept=mean(weight)), linetype=\"dashed\", colour=\"blue\") +\n  geom_density(alpha=.2, fill=\"red\") + # Overlay density plot to show distribution\n  theme_bw() # Make it look good\n\n# Create the plot for Oranges\np2 <- ggplot(data=bagsOfOranges, aes(weight)) + # initialize a plot for data\n  xlim(0,4) + # Set the limits of x axis to keep plots comparable\n  ylim(0,13) + # Set the limits of y axis to keep plots comparable\n  ggtitle(\"Oranges\") + # Set the title to be able to identify plots\n  geom_histogram(binwidth = .1) +  # Set the type as histogram\n  # Add the mean into plot as a blue dashed line\n  geom_vline(data=bagsOfOranges, aes(xintercept=mean(weight)), linetype=\"dashed\", colour=\"blue\") +\n  geom_density(alpha=.2, fill=\"red\") + # Overlay density plot to show distribution\n  theme_bw() # Make it look good\n\ngrid.arrange(p1, p2)\n```\n\nLook at the above plots. These are called histograms, the histogram shows us how many bags were observed in a certain weight class. \n\nOranges is pretty normally distributed with a small standard deviation, whereas apples have a large standard deviation. Hence the mean value does not quite work to compare apples and oranges as they are quite differently distributed.\n\n### T Test\n\nI want to take a tiny segway here. If you want to compare two groups and to see if they are the same or not (Do men and women weight the same? Are business students and engineering students have similar SAT scores?) you can use a t test. In a normal distribution roughly 99.7% of observations will be 2 standard deviations away from the mean. Basically a T test compares the mean values of each group and using standard deviations, it determines if they are indeed the same.\n\n\n\n```{r}\nt.test(bagsOfApples$weight, bagsOfOranges$weight)\n```\nThe p value below .05 indicates the t test shows statistically significant differences between bags of apples and bags of oranges.\n\n## Median\n\nThe apples and oranges were normally distributed (a bell curve with more or less equal number of observations on either side of mean). When distribution is not normal (Consider how wages are distributes with lots of observations on the left with low wages and few very high observations to the right) it is best to report the median instead of the mean. Median is the middle observation, with exactly the same number of observations above and below median.\n\nSince apples were normally distributed median will be similar to mean.\n\n```{r}\nmedian(bagsOfApples$weight)\n```\n\n## Summary Statistics\n\nIt is all good and fine to evaluate variables one by one, but realistically you won't have the time to go through a data set, evaluating variables one by one. There may be hundreds of variables. Let us talk about how to get summary statistics in R easily.\n\nLet us load a dataset to further explore. R and R packages often come with useful data. Let us use a prepackaged dataset here.\n\n[In this document we will analyze the Motor Trends data.](http://www.jstor.org/stable/2530428) The dataset was compiled from 1974 issues of Motor Trends magazine and is included with R Base package.\n  \nLet us start with loading the dataset.\n  \n```{r}\ndata(mtcars)\n```\n\nAs we learned in the section on packages, you can querry the documentation for almost anything. Including the datasets included in packages. The document includes descriptions of the variables.\n\n```{r}\n?mtcars\n```\n\n### Summary Function\n\nEasiest way is to use summary() function in R. It comes bundled with R Base and is loaded in memory by default, so you don't have to load any libraries.\n\n```{r}\n# A summary of variables\nsummary(mtcars)\n```\n\nThe output from summary function displays Mean and Median as well as quartiles, minimum and maximum. This output is very useful in trying to guess the underlying distribution of the dataset.\n\n## Describe Function\n\nA more detailed output can be obtained by the describe function in psych package (you know how to install and activate packages from last week's module).\n\n```{r}\nlibrary(psych)\ndescribe(mtcars)\n```\n\nAs you can see, beyond what is reported in summary, describe function also reports standard deviation and standard error. \n\nYou may notice skewness and kurtosis of the data. These are useful in estimating how far the distribution is from normal (bell curve). Skewness shows how far from symetrical the distribution. Skewness for a normal distribution is zero, symetrical data should have values close to zero. Kurtosis is the amount of data below the tails. The kurtosis for normal distribution is 0. The further from the normal, the more different the values will be.\n\nAt first the skewness and kurtosis may seem alarming, I just want you to realize there is no normal distribution in real life. All data differs from normal to some degree. You can test for normality using various tests like Kolmogorov-Smirnov tests. If your goal is prediction, deviations from normalcy is not a really big deal. The real problems start when you try using the model for explanation.\n\n\n## Correlations\n\nCorrelation is a good measure of how two variables are related. It basically shows you what happens to one variable when you change another. This is a bivariate comparison, meaning it will ignore the effect of all other variables besides the two.\n\nTo obtain a correlation table in R you simply use cor() function.\n\n```{r}\n# Correlation table for first 4 variables (due to space concerns)\ncor(mtcars[,1:4])\n```\n\nA variable will always be perfectly correlated with itself (perfect correlation = 1), if there is no correlation the value will be 0. If the correlations are negative, this means variables are inversely related. \n\nYou can see that amount of horse power in a car is inversely related to miles per galon (-0.776), but the number of cylinders is positively related to horsepower.\n\n## Tabulating the Data\n\nIf you want to see how various groups (groups often mean categorical variables) compare to each other, you can always tabulate the data with table command.\n\nAt its most basic you can get a count of each category for a single categorical variable. Let us tabulate the number of gears.\n\n```{r}\ntable(mtcars$gear)\n```\n\nThere are 15 cars with 3 gears and 5 cars with 5 gears.\n\nLet us see a tabulation of Transmission type (Automatic = 0 and Manual = 1) by Number of Cylinders.\n\n```{r}\n# bivariate comparisons of categorical variables\ntable(mtcars[,c(\"am\",\"cyl\")])\n```\n\nBased on the data most cars with 8 cylinders come with automatic transmissions. For 4 cylinder cars, most of them are manual.\n\n## Solutions to Exercises\n\n1 - Can you make R spit out how many bags have more than 2 pounds of oranges? What is the percentage of overweight bags?\n\n```{r}\n# Use nrow() function to figure out the number\nnrow(bagsOfOranges[bagsOfOranges$weight>2,])\n# We can divide this with the total number of rows to get percentage.\nnrow(bagsOfOranges[bagsOfOranges$weight>2,]) / nrow(bagsOfOranges)\n```\n\n## Housekeeping\n\nIgnore this part, basically this part is to export data created so it can be used in Rmarkdown documents later.\n\n```{r}\nwrite.csv(bagsOfApples, file=\"data/bagsOfApples.csv\", row.names = F)\nwrite.csv(bagsOfOranges, file=\"data/bagsOfOranges.csv\", row.names = F)\n```",
    "created" : 1499207072890.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "858684406",
    "id" : "40D50DB1",
    "lastKnownWriteTime" : 1499211529,
    "last_content_update" : 1499211529532,
    "path" : "~/Dropbox/QBAXXXX/R Content/Week 2 - Data Handling and Exploration/1_Describe.Rmd",
    "project_path" : "1_Describe.Rmd",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}